{"ast":null,"code":"var _jsxFileName = \"/Users/sreedharperim/Aditi/Sem-5/Classroom/gclass_fullstack_final_v5_full/frontend/src/components/MessageList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport API from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MessageList({\n  classId\n}) {\n  _s();\n  const [msgs, setMsgs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (!classId) return;\n    setLoading(true);\n    API.get(`/classes/${classId}/messages`).then(r => setMsgs(r.data || [])).catch(() => setMsgs([])).finally(() => setLoading(false));\n  }, [classId]);\n  const markRead = async id => {\n    try {\n      await API.post(`/messages/${id}/read`);\n      setMsgs(ms => ms.map(m => m.id === id ? {\n        ...m,\n        read_at: new Date().toISOString()\n      } : m));\n    } catch (err) {}\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: \"Loading messages\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1,\n    columnNumber: 579\n  }, this);\n  if (!msgs.length) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card small-muted\",\n    children: \"No messages yet.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1,\n    columnNumber: 650\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: msgs.map(m => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      style: {\n        marginBottom: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 700\n            },\n            children: m.subject || (m.body.length > 60 ? m.body.substring(0, 60) + '…' : m.body)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1,\n            columnNumber: 861\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"small-muted\",\n            children: [\"From: \", m.sender_name, \" \\u2014 \", new Date(m.created_at).toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1,\n            columnNumber: 963\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1,\n          columnNumber: 856\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'right'\n          },\n          children: m.read_at ? /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"small-muted\",\n            children: \"Read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1,\n            columnNumber: 1114\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              e.stopPropagation();\n              markRead(m.id);\n            },\n            className: \"btn btn-ghost\",\n            children: \"Mark read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1,\n            columnNumber: 1157\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1,\n          columnNumber: 1069\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1,\n        columnNumber: 795\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 10,\n          whiteSpace: 'pre-wrap'\n        },\n        children: m.body\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1,\n        columnNumber: 1275\n      }, this)]\n    }, m.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1,\n      columnNumber: 736\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1,\n    columnNumber: 716\n  }, this);\n}\n_s(MessageList, \"PKdo2/LUWjMX2rzf+ZhHhTGgmdI=\");\n_c = MessageList;\nvar _c;\n$RefreshReg$(_c, \"MessageList\");","map":{"version":3,"names":["React","useEffect","useState","API","jsxDEV","_jsxDEV","MessageList","classId","_s","msgs","setMsgs","loading","setLoading","get","then","r","data","catch","finally","markRead","id","post","ms","map","m","read_at","Date","toISOString","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","style","marginBottom","display","justifyContent","fontWeight","subject","body","substring","sender_name","created_at","toLocaleString","textAlign","onClick","e","stopPropagation","marginTop","whiteSpace","_c","$RefreshReg$"],"sources":["/Users/sreedharperim/Aditi/Sem-5/Classroom/gclass_fullstack_final_v5_full/frontend/src/components/MessageList.js"],"sourcesContent":["import React,{useEffect,useState} from 'react'; import API from '../api'; export default function MessageList({classId}){ const [msgs,setMsgs]=useState([]); const [loading,setLoading]=useState(true); useEffect(()=>{ if(!classId)return; setLoading(true); API.get(`/classes/${classId}/messages`).then(r=>setMsgs(r.data||[])).catch(()=>setMsgs([])).finally(()=>setLoading(false)); },[classId]); const markRead=async(id)=>{ try{ await API.post(`/messages/${id}/read`); setMsgs(ms=>ms.map(m=>m.id===id?{...m,read_at:new Date().toISOString()}:m)); }catch(err){} }; if(loading) return <div className='card'>Loading messages…</div>; if(!msgs.length) return <div className='card small-muted'>No messages yet.</div>; return (<div>{msgs.map(m=> (<div key={m.id} className='card' style={{marginBottom:10}}><div style={{display:'flex',justifyContent:'space-between'}}><div><div style={{fontWeight:700}}>{m.subject|| (m.body.length>60?m.body.substring(0,60)+'…':m.body)}</div><div className='small-muted'>From: {m.sender_name} — {new Date(m.created_at).toLocaleString()}</div></div><div style={{textAlign:'right'}}>{m.read_at? <span className='small-muted'>Read</span>: <button onClick={(e)=>{e.stopPropagation(); markRead(m.id)}} className='btn btn-ghost'>Mark read</button>}</div></div><div style={{marginTop:10,whiteSpace:'pre-wrap'}}>{m.body}</div></div>))}</div>); }"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}