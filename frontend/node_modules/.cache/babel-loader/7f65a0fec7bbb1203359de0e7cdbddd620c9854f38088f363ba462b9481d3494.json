{"ast":null,"code":"var _jsxFileName = \"/Users/sreedharperim/Aditi/Sem-5/Classroom/gclass_fullstack_final_v5_full/frontend/src/components/MessageForm.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport API from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MessageForm({\n  classId,\n  onSent\n}) {\n  _s();\n  const [subject, setSubject] = useState('');\n  const [body, setBody] = useState('');\n  const [students, setStudents] = useState([]);\n  const [selected, setSelected] = useState(new Set());\n  const [assignAll, setAssignAll] = useState(true);\n  const [sending, setSending] = useState(false);\n  useEffect(() => {\n    if (!classId) return;\n    API.get(`/classes/${classId}/roster`).then(r => setStudents(r.data.filter(s => s.role === 'student'))).catch(() => setStudents([]));\n  }, [classId]);\n  function toggle(uid) {\n    const s = new Set(selected);\n    if (s.has(uid)) s.delete(uid);else s.add(uid);\n    setSelected(s);\n    if (s.size > 0) setAssignAll(false);\n  }\n  async function submit(e) {\n    e.preventDefault();\n    if (!body) return alert('Write a message');\n    setSending(true);\n    try {\n      const payload = {\n        subject,\n        body\n      };\n      if (!assignAll && selected.size > 0) payload.target_student_ids = Array.from(selected);\n      await API.post(`/classes/${classId}/messages`, payload);\n      setSubject('');\n      setBody('');\n      setSelected(new Set());\n      setAssignAll(true);\n      if (onSent) onSent();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      alert('Send failed: ' + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message));\n    } finally {\n      setSending(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: submit,\n    className: \"card\",\n    style: {\n      marginBottom: 12\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginTop: 0\n      },\n      children: \"New message\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1,\n      columnNumber: 1277\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Subject (optional)\",\n      value: subject,\n      onChange: e => setSubject(e.target.value),\n      className: \"w-full p-2 border rounded\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1,\n      columnNumber: 1319\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      placeholder: \"Write message...\",\n      value: body,\n      onChange: e => setBody(e.target.value),\n      className: \"w-full p-2 border rounded\",\n      rows: 5,\n      style: {\n        marginTop: 8\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1,\n      columnNumber: 1456\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 8\n      },\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: assignAll,\n          onChange: e => {\n            setAssignAll(e.target.checked);\n            if (e.target.checked) setSelected(new Set());\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1,\n          columnNumber: 1653\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginLeft: 8\n          },\n          children: \"Send to entire class\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1,\n          columnNumber: 1791\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1,\n        columnNumber: 1646\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1,\n      columnNumber: 1619\n    }, this), !assignAll && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 8,\n        maxHeight: 160,\n        overflow: 'auto',\n        border: '1px solid rgba(0,0,0,0.05)',\n        padding: 8,\n        borderRadius: 8\n      },\n      children: students.map(s => /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 8,\n          padding: '6px 0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: selected.has(s.id),\n          onChange: () => toggle(s.id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1,\n          columnNumber: 2099\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 600\n            },\n            children: s.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1,\n            columnNumber: 2186\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"small-muted\",\n            children: s.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1,\n            columnNumber: 2230\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1,\n          columnNumber: 2181\n        }, this)]\n      }, s.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1,\n        columnNumber: 2014\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1,\n      columnNumber: 1877\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 10,\n        display: 'flex',\n        gap: 8\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: sending,\n        className: \"btn btn-primary\",\n        children: sending ? 'Sendingâ€¦' : 'Send'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1,\n        columnNumber: 2348\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1,\n      columnNumber: 2299\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1,\n    columnNumber: 1210\n  }, this);\n}\n_s(MessageForm, \"S76vciWSrXeInF6EiSW8g6PILNE=\");\n_c = MessageForm;\nvar _c;\n$RefreshReg$(_c, \"MessageForm\");","map":{"version":3,"names":["React","useEffect","useState","API","jsxDEV","_jsxDEV","MessageForm","classId","onSent","_s","subject","setSubject","body","setBody","students","setStudents","selected","setSelected","Set","assignAll","setAssignAll","sending","setSending","get","then","r","data","filter","s","role","catch","toggle","uid","has","delete","add","size","submit","e","preventDefault","alert","payload","target_student_ids","Array","from","post","err","_err$response","_err$response$data","response","error","message","onSubmit","className","style","marginBottom","children","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","target","rows","type","checked","marginLeft","maxHeight","overflow","border","padding","borderRadius","map","display","alignItems","gap","id","fontWeight","name","email","disabled","_c","$RefreshReg$"],"sources":["/Users/sreedharperim/Aditi/Sem-5/Classroom/gclass_fullstack_final_v5_full/frontend/src/components/MessageForm.js"],"sourcesContent":["import React,{useEffect,useState} from 'react'; import API from '../api'; export default function MessageForm({classId,onSent}){ const [subject,setSubject]=useState(''); const [body,setBody]=useState(''); const [students,setStudents]=useState([]); const [selected,setSelected]=useState(new Set()); const [assignAll,setAssignAll]=useState(true); const [sending,setSending]=useState(false); useEffect(()=>{ if(!classId) return; API.get(`/classes/${classId}/roster`).then(r=>setStudents(r.data.filter(s=>s.role==='student'))).catch(()=>setStudents([])); },[classId]); function toggle(uid){ const s=new Set(selected); if(s.has(uid)) s.delete(uid); else s.add(uid); setSelected(s); if(s.size>0) setAssignAll(false); } async function submit(e){ e.preventDefault(); if(!body) return alert('Write a message'); setSending(true); try{ const payload={subject,body}; if(!assignAll && selected.size>0) payload.target_student_ids=Array.from(selected); await API.post(`/classes/${classId}/messages`, payload); setSubject(''); setBody(''); setSelected(new Set()); setAssignAll(true); if(onSent) onSent(); }catch(err){ alert('Send failed: '+(err.response?.data?.error||err.message)); } finally{ setSending(false); } } return (<form onSubmit={submit} className='card' style={{marginBottom:12}}><h3 style={{marginTop:0}}>New message</h3><input placeholder='Subject (optional)' value={subject} onChange={e=>setSubject(e.target.value)} className='w-full p-2 border rounded' /><textarea placeholder='Write message...' value={body} onChange={e=>setBody(e.target.value)} className='w-full p-2 border rounded' rows={5} style={{marginTop:8}} /><div style={{marginTop:8}}><label><input type='checkbox' checked={assignAll} onChange={e=>{setAssignAll(e.target.checked); if(e.target.checked) setSelected(new Set());}}/> <span style={{marginLeft:8}}>Send to entire class</span></label></div>{!assignAll && (<div style={{marginTop:8,maxHeight:160,overflow:'auto',border:'1px solid rgba(0,0,0,0.05)',padding:8,borderRadius:8}}>{students.map(s=> (<label key={s.id} style={{display:'flex',alignItems:'center',gap:8,padding:'6px 0'}}><input type='checkbox' checked={selected.has(s.id)} onChange={()=>toggle(s.id)} /><div><div style={{fontWeight:600}}>{s.name}</div><div className='small-muted'>{s.email}</div></div></label>))}</div>)}<div style={{marginTop:10,display:'flex',gap:8}}><button type='submit' disabled={sending} className='btn btn-primary'>{sending?'Sendingâ€¦':'Send'}</button></div></form>); }"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}