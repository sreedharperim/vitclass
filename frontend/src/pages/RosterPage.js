import React,{useEffect,useState,useContext} from 'react'; import { useParams, Link } from 'react-router-dom'; import API from '../api'; import { AuthContext } from '../contexts/AuthContext'; export default function RosterPage(){ const { id } = useParams(); const { user } = useContext(AuthContext); const [members,setMembers]=useState([]); const [loading,setLoading]=useState(true); const [error,setError]=useState(null); useEffect(()=>{ load(); },[id]); async function load(){ setLoading(true); setError(null); try{ const r=await API.get(`/classes/${id}/roster`); setMembers(r.data); }catch(err){ setError(err.response?.data?.error||err.message); }finally{ setLoading(false); } } return (<div className='center-container'><div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:12}}><h1>Class Roster</h1><Link to={`/class/${id}`} className='btn btn-ghost' style={{textDecoration:'none'}}>‚Üê Back</Link></div>{loading? <div className='card'>Loading roster...</div> : error? <div className='card' style={{color:'#DC2626'}}>{error}</div> : members.length===0? <div className='card small-muted'>No members yet.</div> : (<div className='card' style={{padding:0}}><table style={{width:'100%',borderCollapse:'collapse'}}><thead style={{background:'#f8f9fa'}}><tr><th style={{textAlign:'left',padding:'10px 12px',fontWeight:600,color:'#374151'}}>Name</th><th style={{textAlign:'left',padding:'10px 12px',fontWeight:600,color:'#374151'}}>Email</th><th style={{textAlign:'left',padding:'10px 12px',fontWeight:600,color:'#374151'}}>Role</th><th style={{textAlign:'left',padding:'10px 12px',fontWeight:600,color:'#374151'}}>Joined</th></tr></thead><tbody>{members.map(m=> (<tr key={m.id} style={{borderBottom:'1px solid #eee'}}><td style={{padding:'8px 12px'}}>{m.name}</td><td style={{padding:'8px 12px'}}>{m.email}</td><td style={{padding:'8px 12px'}}>{m.role}</td><td style={{padding:'8px 12px'}}>{new Date(m.joined_at).toLocaleString()}</td></tr>))}</tbody></table></div>)}</div>) }